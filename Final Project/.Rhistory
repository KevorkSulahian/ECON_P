"Import_in_tonnas","Import")
pls <- expand.grid(id = unique(agg2$ID), year = c(as.character(unique(agg2$Year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg3, by = c('id', 'year'))
class(agg3$year)
agg3 <- agg2
agg3$Year <- as.character(agg3$Year)
class(agg3$year)
View(agg3)
class(agg3$Year)
agg3 <- agg2
agg3$Year <- as.character(agg3$Year)
colnames(agg3) <- c("Կենդանի կենդանիներ և կենդանական ծագման արտադրանք",
"id"
,"year","Period",
"Export_in_tonnas" ,"Export",
"Import_in_tonnas","Import")
pls <- expand.grid(id = unique(agg2$ID), year = c(as.character(unique(agg2$Year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg3, by = c('id', 'year'))
View(pls)
pls <- expand.grid(id = unique(agg2$ID), year = c(as.character(unique(agg2$Year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg3, by = c('id', 'year')) %>%
spread(key = year, value = c(Export_in_tonnas, Export, Import_in_tonnas, Import), fill = 0)
pls <- expand.grid(id = unique(agg2$ID), year = c(as.character(unique(agg2$Year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg3, by = c('id', 'year')) %>%
spread(key = year, value = c(Import), fill = 0)
View(pls)
colnames(agg3) <- c("Կենդանի կենդանիներ և կենդանական ծագման արտադրանք",
"id"
,"year","period",
"Export_in_tonnas" ,"Export",
"Import_in_tonnas","Import")
pls <- expand.grid(id = unique(agg2$ID), year = c(as.character(unique(agg2$Year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg3, by = c('id', 'year')) %>%
spread(key = year, value = c(Import), fill = 0)
pls <- expand.grid(id = unique(agg3$ID), year = c(as.character(unique(agg2$Year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg3, by = c('id', 'year')) %>%
spread(key = year, value = c(Import), fill = 0)
View(agg3)
colnames(agg3) <- c("Կենդանի կենդանիներ և կենդանական ծագման արտադրանք",
"id"
,"year","period",
"Export_in_tonnas" ,"Export",
"Import_in_tonnas","Import")
pls <- expand.grid(id = unique(agg3$ID), year = c(as.character(unique(agg2$Year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg3, by = c('id', 'year')) %>%
spread(key = year, value = c(Import), fill = 0)
View(agg3)
pls <- expand.grid(id = unique(agg3$ID), year = c(as.character(unique(agg3$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg3, by = c('id', 'year')) %>%
spread(key = year, value = c(Import), fill = 0)
pls <- expand.grid(id = unique(agg2$ID), year = c(as.character(unique(agg2$Year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg3, by = c('id', 'year')) %>%
spread(key = year, value = c(Import), fill = 0)
pls <- expand.grid(id = unique(agg2$ID), year = c(as.character(unique(agg2$Year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(key = year, value = c(Import), fill = 0)
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(key = year, value = c(Import), fill = 0)
agg2$year
View(agg2)
colnames(agg2) <- c("Կենդանի կենդանիներ և կենդանական ծագման արտադրանք",
"id"
,"year","period",
"Export_in_tonnas" ,"Export",
"Import_in_tonnas","Import")
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(key = year, value = c(Import), fill = 0)
agg2$year <- as.character(agg2$year)
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(key = year, value = c(Import), fill = 0)
pls2 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Import), fill = 0)
agg2$period <- as.character(agg2$period)
pls2 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Import), fill = 0)
View(pls2)
pls3 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period))), year = c(as.character(unique(agg2$year)))) %>%
mutate(period = as.character(period),
year = as.character(year)) %>%
left_join(agg2, by = c('id','year', 'period')) %>%
spread(key = period, value = c(Import), fill = 0)
View(pls3)
pls3 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period))), year = c(as.character(unique(agg2$year)))) %>%
mutate(period = as.character(period),
year = as.character(year)) %>%
left_join(agg2, by = c('id','year', 'period')) %>%
spread(key = c(year,period), value = c(Import), fill = 0)
View(pls)
View(pls2)
View(pls2)
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(key = year, value = c(Import, Import_in_tonnas), fill = 0)
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread_(key = year, value = c(Import), fill = 0)
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread_(year,(Import), fill = 0)
years = year
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread_(years,(Import), fill = 0)
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread_(years,Import, fill = 0)
import = Import
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread_(years,import, fill = 0)
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(years,import, fill = 0)
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread_(key = year, value = c(Import), fill = 0)
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(key = year, value = c(Import), fill = 0)
View(pls)
View(pls2)
pls2 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, fill = 0)
pls2 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Import, Export), fill = 0)
agg3 <- agg2
View(agg2)
agg2 <- agg3[c(1:5)]
agg2[5,]
agg2[,5]
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(key = year, value = c(agg2[,5]), fill = 0)
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(key = year, value = c(Export_in_tonnas), fill = 0)
View(pls)
agg2 <- agg3[c(1:4,6)]
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(key = year, value = c(Export), fill = 0)
View(pls)
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(key = year, value = c(Export))
View(pls)
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(key = year, value = c(Export), drop = F)
View(pls)
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(key = year, value = c(Export),fill = 0)
View(pls)
agg2 <- agg3[c(1:4,8)]
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(key = year, value = c(Export),fill = 0)
pls <- expand.grid(id = unique(agg2$id), year = c(as.character(unique(agg2$year)))) %>%
mutate(year = as.character(year)) %>%
left_join(agg2, by = c('id', 'year')) %>%
spread(key = year, value = c(Import),fill = 0)
pls2 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Import), fill = 0)
View(pls2)
unique(agg2$period)
name <- paste0('month', 1)
something[1] <- name
for (i in 1:length(6)) {
print(i)
}
1:length(6)
for (i in 1:6)) {
print(i)
}
for (i in 1:6) {
print(i)
}
for (i in 1:length(unique(agg3$period))) {
print(i)
}
for (i in (unique(agg3$period))) {
print(i)
}
View(pls2)
View(agg2)
for (i in (colnames(pls2[-c(1,2,3)]))) {
print(i)
}
complete <- ""
name <- paste0("import", i)
append(complete,name)
complete <- NA
for (i in (colnames(pls2[-c(1,2,3)]))) {
name <- paste0("import ", i)
append(complete,name)
}
for (i in (colnames(pls2[-c(1,2,3)]))) {
name <- paste0("import ", i)
append(complete,name)
}
name <- paste0("import ", i)
append(complete,name)
append(complete1,name)
complete <- NULL
for (i in (colnames(pls2[-c(1,2,3)]))) {
name <- paste0("import ", i)
append(complete1,name)
}
for (i in (colnames(pls2[-c(1,2,3)]))) {
name <- paste0("import ", i)
append(complete,name)
}
complete <- NULL
for (i in (colnames(pls2[-c(1,2,3)]))) {
name <- paste0("import ", i)
complete <- append(complete,name)
}
complete
complete[2]
complete[4]
colnames(pls2[-c(1:3)]) <- complete
colnames(pls2[-c(1:3)]) <- complete
colnames(pls2[-c(1:3)])
colnames(pls2[-c(1:3)]) <- complete
colnames(pls2) <-c(colnames(pls2[c(1:3)]), complete)
View(agg3)
# Export_in_tonnas
agg2 <- agg3[c(1:4,5)]
pls <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Export_in_tonnas), fill = 0)
complete <- NULL
for (i in (colnames(pls[-c(1,2,3)]))) {
name <- paste0("Export_in_tonnas ", i)
complete <- append(complete,name)
}
colnames(pls) <-c(colnames(pls[c(1:3)]), complete)
# Export
agg2 <- agg3[c(1:4,6)]
pls2 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Export), fill = 0)
complete <- NULL
for (i in (colnames(pls2[-c(1,2,3)]))) {
name <- paste0("Export ", i)
complete <- append(complete,name)
}
colnames(pls2) <-c(colnames(pls2[c(1:3)]), complete)
# Import_in_tonnas
agg2 <- agg3[c(1:4,8)]
pls3 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Import_in_tonnas), fill = 0)
complete <- NULL
for (i in (colnames(pls3[-c(1,2,3)]))) {
name <- paste0("Import_in_tonnas ", i)
complete <- append(complete,name)
}
colnames(pls3) <-c(colnames(pls3[c(1:3)]), complete)
# Import
agg2 <- agg3[c(1:4,8)]
pls4 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Import), fill = 0)
complete <- NULL
for (i in (colnames(pls4[-c(1,2,3)]))) {
name <- paste0("import ", i)
complete <- append(complete,name)
}
colnames(pls4) <-c(colnames(pls4[c(1:3)]), complete)
# Import_in_tonnas
agg2 <- agg3[c(1:4,7)]
pls3 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Import_in_tonnas), fill = 0)
complete <- NULL
for (i in (colnames(pls3[-c(1,2,3)]))) {
name <- paste0("Import_in_tonnas ", i)
complete <- append(complete,name)
}
colnames(pls3) <-c(colnames(pls3[c(1:3)]), complete)
complete_data <- rbind(pls,pls2,pls3,pls4, by = c("ID", "year"))
complete_data <- rbind(pls,pls2,pls3,pls4, by = c("id", "year"))
complete_data <- rbind(pls,pls2, by = c("id", "year"))
View(pls2)
complete_data <- merge(pls,pls2,pls3,pls4, by = c("id", "year"))
complete_data <- merge(pls,pls2, by = c("id", "year"))
complete_data <- merge(complete_data,pls3, by = c("id", "year"))
complete_data <- merge(complete_data,pls4, by = c("id", "year"))
View(complete_data)
View(pls2)
complete_data <- merge(pls,pls2[-2], by = c("id", "year"))
complete_data <- merge(complete_data,pls3[-2], by = c("id", "year"))
complete_data <- merge(complete_data,pls4[-2], by = c("id", "year"))
View(complete_data)
View(agg2)
complete_data <- complete_data[complete.cases(complete_data)]
complete_data <- complete_data[complete.cases(complete_data),]
df <- readxl::read_xlsx("each_month.xlsx")
main <- readxl::read_xlsx("main.xlsx")
df <- merge(df[-c(1)], main,by.x = "ID", by.y = "X__1")
df <- df[c(8,1,2,3,4,5,6,7)]
colnames(agg2) <- c("Կենդանի կենդանիներ և կենդանական ծագման արտադրանք",
"id"
,"year","period",
"Export_in_tonnas" ,"Export",
"Import_in_tonnas","Import")
agg2$year <- as.character(agg2$year)
agg2$period <- as.character(agg2$period)
agg3 <- agg2
# Export_in_tonnas
agg2 <- agg3[c(1:4,5)]
pls <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Export_in_tonnas), fill = 0)
complete <- NULL
for (i in (colnames(pls[-c(1,2,3)]))) {
name <- paste0("Export_in_tonnas ", i)
complete <- append(complete,name)
}
colnames(pls) <-c(colnames(pls[c(1:3)]), complete)
# Export
agg2 <- agg3[c(1:4,6)]
pls2 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Export), fill = 0)
complete <- NULL
for (i in (colnames(pls2[-c(1,2,3)]))) {
name <- paste0("Export ", i)
complete <- append(complete,name)
}
colnames(pls2) <-c(colnames(pls2[c(1:3)]), complete)
# Import_in_tonnas
agg2 <- agg3[c(1:4,7)]
pls3 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Import_in_tonnas), fill = 0)
complete <- NULL
for (i in (colnames(pls3[-c(1,2,3)]))) {
name <- paste0("Import_in_tonnas ", i)
complete <- append(complete,name)
}
colnames(pls3) <-c(colnames(pls3[c(1:3)]), complete)
# Import
agg2 <- agg3[c(1:4,8)]
pls4 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Import), fill = 0)
complete <- NULL
for (i in (colnames(pls4[-c(1,2,3)]))) {
name <- paste0("import ", i)
complete <- append(complete,name)
}
colnames(pls4) <-c(colnames(pls4[c(1:3)]), complete)
# bind bitches
complete_data <- merge(pls,pls2[-2], by = c("id", "year"))
complete_data <- merge(complete_data,pls3[-2], by = c("id", "year"))
complete_data <- merge(complete_data,pls4[-2], by = c("id", "year"))
complete_data <- complete_data[complete.cases(complete_data),]
complete_data <- merge(pls,pls2[-2], by = c("id", "year"))
df <- readxl::read_xlsx("each_month.xlsx")
main <- readxl::read_xlsx("main.xlsx")
df <- merge(df[-c(1)], main,by.x = "ID", by.y = "X__1")
df <- df[c(8,1,2,3,4,5,6,7)]
colnames(agg2) <- c("Կենդանի կենդանիներ և կենդանական ծագման արտադրանք",
"id"
,"year","period",
"Export_in_tonnas" ,"Export",
"Import_in_tonnas","Import")
agg2$year <- as.character(agg2$year)
df <- readxl::read_xlsx("each_month.xlsx")
main <- readxl::read_xlsx("main.xlsx")
df <- merge(df[-c(1)], main,by.x = "ID", by.y = "X__1")
df <- df[c(8,1,2,3,4,5,6,7)]
df <- readxl::read_xlsx("each_month.xlsx")
main <- readxl::read_xlsx("main.xlsx")
df <- merge(df[-c(1)], main,by.x = "ID", by.y = "X__1")
df <- df[c(8,1,2,3,4,5,6,7)]
agg2 <- df
colnames(agg2) <- c("Կենդանի կենդանիներ և կենդանական ծագման արտադրանք",
"id"
,"year","period",
"Export_in_tonnas" ,"Export",
"Import_in_tonnas","Import")
agg2$year <- as.character(agg2$year)
agg2$period <- as.character(agg2$period)
agg3 <- agg2
# Export_in_tonnas
agg2 <- agg3[c(1:4,5)]
pls <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Export_in_tonnas), fill = 0)
complete <- NULL
for (i in (colnames(pls[-c(1,2,3)]))) {
name <- paste0("Export_in_tonnas ", i)
complete <- append(complete,name)
}
colnames(pls) <-c(colnames(pls[c(1:3)]), complete)
# Export
agg2 <- agg3[c(1:4,6)]
pls2 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Export), fill = 0)
complete <- NULL
for (i in (colnames(pls2[-c(1,2,3)]))) {
name <- paste0("Export ", i)
complete <- append(complete,name)
}
colnames(pls2) <-c(colnames(pls2[c(1:3)]), complete)
# Import_in_tonnas
agg2 <- agg3[c(1:4,7)]
pls3 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Import_in_tonnas), fill = 0)
complete <- NULL
for (i in (colnames(pls3[-c(1,2,3)]))) {
name <- paste0("Import_in_tonnas ", i)
complete <- append(complete,name)
}
colnames(pls3) <-c(colnames(pls3[c(1:3)]), complete)
# Import
agg2 <- agg3[c(1:4,8)]
pls4 <- expand.grid(id = unique(agg2$id), period = c(as.character(unique(agg2$period)))) %>%
mutate(period = as.character(period)) %>%
left_join(agg2, by = c('id', 'period')) %>%
spread(key = period, value = c(Import), fill = 0)
complete <- NULL
for (i in (colnames(pls4[-c(1,2,3)]))) {
name <- paste0("import ", i)
complete <- append(complete,name)
}
colnames(pls4) <-c(colnames(pls4[c(1:3)]), complete)
complete_data <- merge(pls,pls2[-2], by = c("id", "year"))
complete_data <- merge(complete_data,pls3[-2], by = c("id", "year"))
complete_data <- merge(complete_data,pls4[-2], by = c("id", "year"))
complete_data <- complete_data[complete.cases(complete_data),]
source('final1.R')
source('final1.R')
View(complete_data)
library(tidyr)
complete_data %>% spread(year, complete_data[-c(1:3)])
library(data.table)
dcast(complete_data, year~.)
what <- dcast(complete_data, year~.)
View(what)
attach(complete_data)
what <- dcast(complete_data, year~ `Export_in_tonnas 1`)
View(what)
what <- dcast(complete_data, year~ `Export_in_tonnas 1`, sum)
View(what)
what <- dcast(complete_data, year~ `Export_in_tonnas 1`:`import 6`, sum)
View(what)
what <- dcast(complete_data, year~ `Export_in_tonnas 1`:`import 6`)
what <- dcast(complete_data, year~ `Export_in_tonnas 1`+`import 6`)
what <- dcast(complete_data, -c(1:3)~year)
View(what)
View(complete_data)
